{"version":3,"sources":["webpack://Oiii/./src/index.js","webpack://Oiii/webpack/bootstrap","webpack://Oiii/webpack/startup"],"names":["Oiii","area","container","button","type","current","full","this","make_viewer","make_lists","make_single","viewer","document","createElement","classList","add","addEventListener","e","target","tagName","update","innerText","href","appendChild","body","lists","forEach","def","concat","Array","from","querySelectorAll","join","list","hasAttribute","handle","singles","elements","element","preventDefault","dataset","oiPreview","oiYt","oiFullsize","state","img","src","url","parse_url","toString","frame","frameBorder","allow","allowFullscreen","toggle","setTimeout","innerHTML","match","length","removeChild","module","exports","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__"],"mappings":"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","file":"oiii.min.js","sourcesContent":["class Oiii {\n    #viewer = {\n        area: null,\n        container: null,\n        button: null\n    }\n\n    #store = {\n        type: true,\n        current: null,\n        full: null\n    }\n\n    #list_definitions = ['data-oi-list', 'data-oi-list-yt']\n    #single_definitions = ['data-oi-image', 'data-oi-video']\n\n    constructor() {\n        this.make_viewer()\n        this.make_lists()\n        this.make_single()\n    }\n\n    make_viewer() {\n        let viewer = document.createElement('div')\n        let container = document.createElement('div')\n        let button = document.createElement('a')\n\n        viewer.classList.add('viewer')\n        container.classList.add('container')\n\n        viewer.addEventListener('click', (e => {\n            let el = e.target\n            if (el.tagName === 'A') {\n                return\n            }\n\n            this.update(false)\n        }))\n\n        button.innerText = ''\n        button.href = '#'\n        button.target = '_blank'\n\n        viewer.appendChild(container)\n        viewer.appendChild(button)\n\n        this.#viewer = {\n            area: viewer,\n            container: container,\n            button: button\n        }\n\n        document.body.appendChild(this.#viewer.area)\n    }\n\n    make_lists() {\n        let lists = []\n        this.#list_definitions.forEach(def => {\n            lists = lists.concat(\n                Array.from(\n                    document.querySelectorAll(\n                        ['[', def, ']'].join('')\n                    )\n                )\n            )\n        })\n\n        lists.forEach(list => {\n            if (list.hasAttribute(this.#list_definitions[0])) {\n                // images\n                this.handle(list.querySelectorAll('img'))\n            } else if (list.hasAttribute(this.#list_definitions[1])) {\n                // yt\n                this.handle(list.querySelectorAll('a'))\n            }\n        })\n    }\n\n    make_single() {\n        let singles = []\n        this.#single_definitions.forEach(def => {\n            singles = singles.concat(\n                Array.from(\n                    document.querySelectorAll(\n                        ['[', def, ']'].join('')\n                    )\n                )\n            )\n        })\n        this.handle(singles)\n    }\n\n    handle(elements) {\n        elements.forEach(element => {\n            element.addEventListener('click', (e => {\n                e.preventDefault()\n\n                this.#store = {\n                    current: (element.hasAttribute('data-oi-preview')) ? element.dataset.oiPreview : element.dataset.oiYt,\n                    full: (element.hasAttribute('data-oi-fullsize')) ? element.dataset.oiFullsize : null,\n                    type: (element.hasAttribute('data-oi-preview') || element.hasAttribute('data-oi-fullsize'))\n                }\n\n                this.update(true)\n            }))\n        })\n    }\n\n    update(state) {\n        if (state === true && this.#store.current !== null) {\n            if (this.#store.type === true) {\n                let img = document.createElement('img')\n                img.src = this.#store.current\n\n                this.#viewer.container.appendChild(img)\n                this.#viewer.button.href = this.#store.full\n            } else if (this.#store.type === false) {\n                let url = 'https://www.youtube.com/embed/' + this.parse_url(this.#store.current).toString()\n\n                let frame = document.createElement('iframe')\n                frame.src = url\n                frame.frameBorder = '0'\n                frame.allow = 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture'\n                frame.allowFullscreen = true\n\n                this.#viewer.container.appendChild(frame)\n                this.#viewer.button.href = this.#store.current\n            }\n\n            this.#viewer.button.innerText = ['Open', (this.#store.type) ? 'image' : 'in YouTube'].join(' ')\n            this.#viewer.area.classList.toggle('viewer_show')\n        }\n\n        if (state === false) {\n            this.#viewer.area.classList.toggle('viewer_show')\n            setTimeout(() => {\n                this.#viewer.container.innerHTML = \"\"\n                this.#viewer.button.href = '#'\n            }, 250)\n        }\n    }\n\n    parse_url(url) {\n        let regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#&?]*).*/\n        let match = url.match(regExp)\n        return (match && match[7].length===11) ? match[7] : false\n    }\n\n    unload() {\n        document.body.removeChild(this.#viewer.area)\n    }\n}\n\nmodule.exports = Oiii\n// export default Oiii","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(352);\n"],"sourceRoot":""}